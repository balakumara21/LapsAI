@page "/workflowairesult"
@using LapsAI.Shared.Services
@using Syncfusion.Blazor.Cards
@using Syncfusion.Blazor.Buttons
@using Microsoft.JSInterop
@inject IJSRuntime JSRuntime

<style>
    /* Custom CSS styles */
    .page-background {
        background-color: #F9FAFB;
        min-height: 100vh;
    }

    .content-padding {
        padding: 30px;
    }

    .shadow-card {
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .json-icon-frame {
        height: 35px;
        width: 35px;
        border-radius: 8px;
        background-color: #EEF2FF; /* Light blue */
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        font-weight: bold;
        color: #2563EB;
        margin-right: 10px;
    }

    .code-block {
        background-color: #F3F4F6;
        padding: 15px;
        border-radius: 4px;
        position: relative;
        font-family: monospace;
        font-size: 14px;
        color: #374151;
    }

    .copy-icon {
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 18px;
        color: #9CA3AF;
        cursor: pointer;
    }

    .send-button-frame {
        height: 40px;
        width: 40px;
        border-radius: 50%;
        background-color: #2563EB;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        color: white;
        cursor: pointer;
    }
</style>

<div class="page-background">
    <div style="display: grid; grid-template-rows: 1fr auto; min-height: 100vh;">

        <div style="overflow-y: auto;">
            <div class="content-padding">

                <div style="margin-bottom: 25px; padding-top: 10px;">
                    <h1 style="font-size: 28px; font-weight: bold; color: #1F2937;">Workflow AI</h1>
                </div>

                <SfCard Class="shadow-card" CssClass="e-card-bordered" style="padding: 20px; border-radius: 12px; margin-bottom: 25px;">
                    <div class="e-card-content">
                        <h2 style="font-size: 18px; font-weight: bold; color: #1F2937; margin-bottom: 10px;">Generate Workflow</h2>
                        <p style="font-size: 14px; color: #6B7280; margin-bottom: 15px;">Create a new workflow process from specifications.</p>

                        <SfButton Content="Create workflow process json?"
                                  CssClass="e-primary"
                                  style="height: 45px; border-radius: 8px; font-size: 16px;">
                        </SfButton>
                    </div>
                </SfCard>

                <SfCard Class="shadow-card" CssClass="e-card-bordered" style="padding: 20px; border-radius: 12px; margin-bottom: 25px;">
                    <div class="e-card-content">
                        <div style="display: flex; align-items: center; margin-bottom: 15px;">
                            <div class="json-icon-frame"><span>{ }</span></div>
                            <h2 style="font-size: 18px; font-weight: bold; color: #1F2937;">Workflow Process JSON</h2>
                        </div>

                        <div class="code-block">
                            <span class="copy-icon" @onclick="CopyJson">📋</span>

                            <pre style="margin: 0;">@JsonOutput</pre>
                        </div>
                    </div>
                </SfCard>

            </div>
        </div>

        <div style="background-color: white; padding: 15px 30px; border-top-left-radius: 20px; border-top-right-radius: 20px; box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);">
            <div style="display: flex; align-items: center; gap: 10px;">
                <input type="text"
                       placeholder="e.g., Create a workflow for..."
                       style="flex-grow: 1; height: 40px; padding: 0 10px; border: none; outline: none; font-size: 16px; color: #1F2937;" />

                <span style="font-size: 24px; color: #9CA3AF; cursor: pointer;">&#x00A9;</span> <div class="send-button-frame" @onclick="SendMessage">
                    <span>⬆️</span>
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    private string JsonOutput =
@"json
{
  ""workflow_name"": ""Bid Processing"",
  ""start"": ""Web Check"",
  ""steps"": [
    {
      ""id"": 1,
      ""name"": ""Web Check"",
      ""tool"": ""API Call"",
      ""next"": 2
    },
    ...
  ]
}";

    private async Task CopyJson()
    {
        // Use JS Interop to copy the JSON content to the clipboard
        await JSRuntime.InvokeVoidAsync("navigator.clipboard.writeText", JsonOutput);
    }

    private void SendMessage()
    {
        // Logic to process the chat message
    }
}